<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>民航机票代理市场系统</title>
<meta name="keywords"  content="设置关键词..." />
<meta name="description" content="设置描述..." />
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<link rel="icon" href="https://static.jianshukeji.com/highcharts/images/favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1">	
<link rel="icon" href="images/icon/favicon.ico" type="image/x-icon">
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="javascript/jquery.js"></script>
<script src="javascript/plug-ins/customScrollbar.min.js"></script>
<script src="javascript/plug-ins/echarts.min.js"></script>
<script src="javascript/plug-ins/layerUi/layer.js"></script>
<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
<script src="javascript/plug-ins/pagination.js"></script>
<script src="javascript/public.js"></script>
<!-- 多选框 -->
<link rel="stylesheet" type="text/css" href="css/jquery.multiselect.css" />
<link href="css/jquery-ui.css" rel="stylesheet" />
<script src="javascript/jquery-ui.min.js"></script>
<script type="text/javascript" src="javascript/echarts.min.js"></script>
<!-- ／多选框 -->
</head>
<body>
<!-- <div class="main-wrap"> -->
	
		
<main class="main-cont content mCustomScrollbar">
<header class="top-hd">
			
			<div class="hd-rt">
				<ul>
					
					<li>
						<a href="javascript:void(0)" id="JsSignOut"><i class="icon-signout"></i>安全退出</a>
					</li>
				</ul>
			</div>
		</header>		
<div class="page-wrap">
	<section class="page-hd">
	<div class="box box1">
		<div class="top-box"><i class="icon-trophy"></i>航空公司介绍</div>
		<div class="main-box">
    <div id="main33" style="width: 170px;height:170px;margin-left: 33%;margin-top: 10px;">
      
    </div>
	<p style="text-align: center;">航空公司数量</p>
	<blockquote style="padding: 10px 20px;margin: 5px;">
	<p style="color: rgb(58,70,82);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;本系统包括多家航空公司，航空公司的主要业务是对机票进行销售，并且航空公司每天都会向不同的代理人进行机票销售业务，本系统主要对航空公司的机票销售量以及销售金额进行分析。</p>
	</blockquote>
<div class="hover-box">
				  
<script type="text/javascript">
	var resultlist;
	$(function(){
		$.ajax({
				type:"post",
				url:"flywhole.action",
				data:null,
				dataType:"json",
				contentType:"application/json;charset=utf-8",
				success:function(data){
					if(!data.isLogin){
						window.parent.location.href="login.html";
						return;
					}
					var datainfo = JSON.parse(data.data);
					resultlist=datainfo.infolist;
					var myChart = echarts.init(document.getElementById('main33'));
					var dataStyle = {
					    normal: {
					        label: {
					            show: false
					        },
					        labelLine: {
					            show: false
					        },
					        shadowBlur: 30,
					        shadowColor: 'rgb(40, 40, 40)',
					    }
					};
					var placeHolderStyle = {
						      normal: {
						          color: '#68838B',//未完成的圆环的颜色
						          label: {
						              show: false
						          },
						          labelLine: {
						              show: false
						          }
						      },
						      emphasis: {
						          color: '#5D478B'//未完成的圆环的颜色
						      }
						  };
					 var option = {
						      title: {
						          text:(datainfo.count).toString(),
						          x: 'center',
						          y: 'center',
						          textStyle: {
						              fontWeight: 'normal',
						              color: "#191970",
						              fontSize: 30
						          }
						      },
						      backgroundColor: '#fff',
						      color: ['#8E8E38', '#8E8E38', '#fff'],
						      tooltip: {
						          show: false,
						          formatter: "{a} <br/>{b} : {c} ({d}%)"
						      },
						    
						      legend: {
						          show: false,
						          itemGap: 12,
						          data: ['01', '02']
						      },
						      
						      toolbox: {
						          show: false,
						          feature: {
						              mark: {
						                  show: true
						              },
						              dataView: {
						                  show: true,
						                  readOnly: false
						              },
						              restore: {
						                  show: true
						              },
						              saveAsImage: {
						                  show: true
						              }
						          }
						      },
						      series: [{
						              name: 'Line 1',
						              type: 'pie',
						              clockWise: false,
						              radius: [48, 63],
						              itemStyle: dataStyle,
						              hoverAnimation: false,

						              data: [{
						                      value: 75,
						                      name: '01'
						                  }, {
						                      value: 25,
						                      name: 'invisible',
						                      itemStyle: placeHolderStyle
						                  }

						              ]
						          }, {
						              name: 'Line 2',
						              type: 'pie',
						              animation: false,
						              clockWise: false,
						              radius: [220, 218],
						              itemStyle: dataStyle,
						              hoverAnimation: false,
						              tooltip: {
						                  show: false
						              },
						              data: [{
						                      value: 100,
						                      name: '02',
						                      itemStyle: {
						                          emphasis: {
						                              color: '#9B30FF'
						                          }
						                      }
						                  }, {
						                      value: 0,
						                      name: 'invisible',
						                      itemStyle: placeHolderStyle
						                  }

						              ]
						          },


						      ]
						  };
						  myChart.setOption(option);
						  
						  
						  var myChart1 = echarts.init(document.getElementById('main22'));
						  var data1=datainfo.topfive[0];
						  var data2=datainfo.topfive[1];
						  var data3=datainfo.topfive[2];
						  var data4=datainfo.topfive[3];
						  var data5=datainfo.topfive[4];
						  var data6=datainfo.topfive[5];
						  var option1 = {
						    title : {
						        text: '',
						        subtext: '',
						        x:'center'
						    },
						    tooltip : {
						        trigger: 'item',
						        formatter: "{a} <br/>{b} : {c} ({d}%)"
						    },
						    legend: {
						        x : 'left',
						        y : 'top',
						        orient: 'vertical',
						        data:[data1["name"],data2["name"],data3["name"],data4["name"],data5["name"],data6["name"]]
						    },
						    toolbox: {
						        show : true,
						        feature : {
						            mark : {show: true},
						            dataView : {show: true, readOnly: false},
						            magicType : {
						                show: true,
						                type: ['pie', 'funnel']
						            },
						            restore : {show: true},
						            saveAsImage : {show: true}
						        }
						    },
						    calculable : true,
						    series : [
						        {
						            name:'面积模式',
						            type:'pie',
						            radius : [20, 100],
						            center : ['60%', '53%'],
						            roseType : 'area',
						            data:datainfo.topfive
						        }
						    ]
						};
						myChart1.setOption(option1);
						
						var totalpage=parseInt((datainfo.count+9)/10);
						$("#totalPage").text(totalpage.toString());
						$("#currentPage").text("1");
						infolist(datainfo.infolist);
						
						var myChart2 = echarts.init(document.getElementById('main'));
						var option2 = {
					        title:{
					         text:'航空公司售票详情',
					         margin:20,
					         top:10,
					         left:'center',
					            textStyle: {
					            color: '#000',
					            fontStyle: 'normal',
					            fontFamily: '微软雅黑',
					            fontSize: 20,
					            margin:40,
					        }
					     },
					    tooltip: {
					        trigger: 'axis',
					        axisPointer: {type: 'cross'}
					    },
					    grid: {
				            right: '15%',
				            top:80
				           
				        },
					     dataZoom:[
					                    {   show:true,
					                        height:25,
					                        xAxisIndex: [0],
					                        bottom:10,
					                        type: 'slider',
					                        startValue: 0,
					                        endValue: 10,
					                        handleIcon: 'path://M306.1,413c0,2.2-1.8,4-4,4h-59.8c-2.2,0-4-1.8-4-4V200.8c0-2.2,1.8-4,4-4h59.8c2.2,0,4,1.8,4,4V413z',
					                        handleSize:'110%',
					                        handleStyle: {
					                            color:'#9B4E4E'
					                        }
					                     },
					                     {
					                         show:true,
					                         type: 'inside',
					                         height:15,
					                         startValue: 0,
					                         endValue:10
					                     }
					                     ,
					                     {
					                         show: true,
					                         yAxisIndex: [0,1],
					                         filterMode: 'empty',
					                         width: 30,
					                         height: '70%',
					                         showDataShadow: false,
					                         right: '3%'
					                     }
					                    ],
					    toolbox: {
					        feature: {
					            dataView: {show: true, readOnly: false},
					            magicType: {show: true, type: ['line', 'bar']},
					            restore: {show: true},
					            saveAsImage: {show: true}
					        }
					    },
					    legend: {
					        left:20,
					        top:10,
					        data:['售票数量','售票金额']
					    },
					    xAxis: [
					        {
					            type: 'category',
					            data: datainfo.flylist
					        }
					    ],
					    yAxis: [
					        {
					            type: 'value',
					            name: '数量(单位:张)',
					            min: 0,
					            max: 15000000,
					            interval: 3000000,
					            axisLabel: {
					                formatter: '{value}'
					            }
					        },
					        {
					            type: 'value',
					            name: '金额(单位:万元)',
					            min: 0,
					            max:1500000.0,
					            interval: 300000.0,
					            axisLabel: {
					                formatter: '{value}'
					            }
					        }
					    ],
					    series: [
					        {
					            name:'售票数量',
					            type:'bar',
					            data:datainfo.cntlist
					        },
					        {
					            name:'售票金额',
					            type:'bar',
					            yAxisIndex: 1,
					            data:datainfo.roundlist
					        }
					    ]
					};
					myChart2.setOption(option2);
					window.onresize=function(){
						myChart.resize();
						myChart1.resize();
						myChart2.resize();
					}
					
				}
				
			});
	});
	
	function infolist(info){
		$("#datalist").html("");
		var start=(parseInt($("#currentPage").text())-1)*10;
		var datastring="";
		var number=info.length-start;
		number=number<10?number:10;
		for(var i=0;i<number;i++){
			var data=info[start+i];
			var content="";
			if(i%2==0){//奇数
				content="<tr style='background:#EDEDED;height: 25px;'>";
			}else{
				content="<tr style='background:white;height: 25px;'>";
			}
			content+="<td>"+(start+i+1)+"</td>"+"<td>"+data.sale_nbr+"</td>"+"<td>"+data.cnt+"</td>"+"<td>"+(data.round/10000)+"</td>";
			content+="</tr>";
			datastring+=content;
		}
		
		$("#datalist").html(datastring);
	}
	function firstPage(){
		$("#currentPage").text("1");
		infolist(resultlist);
		
	}
	function lastPage(){
		$("#currentPage").text(parseInt($("#totalPage").text()));
		infolist(resultlist);
		
	}
	
	function prevPage(){
		var page=parseInt($("#currentPage").text());
		if(page==1){
			alert("已经是第一页！");
		}else{
			$("#currentPage").text((page-1).toString());
		}
		infolist(resultlist);
	}
	function nextPage(){
		var page=parseInt($("#currentPage").text());
		if(page==parseInt($("#totalPage").text())){
			alert("已经是最后一页！");
		}else{
			$("#currentPage").text((page+1).toString());
		}
		infolist(resultlist);
	}
	function selectPage(){
		var selectPage=parseInt($("#selectPage").val());
		var totalPage=parseInt($("#totalPage").text());
		if(selectPage>=1&&selectPage<=totalPage){
			$("#currentPage").text(selectPage.toString());
			infolist(resultlist);
		}else{
			alert("选择页数有误，请重新选择！");
		}
	}
</script>


			   </div>
			

		</div>
	</div>
	<div class="box box2">
		<div class="top-box">
			<i class="icon-trophy"></i>售票前五的航空公司
		</div>
		<div class="main-box">
			<div id="main22" style="width: 100%;height: 300px;"></div>


      </iframe>
		</div>
	</div>
	<div style="clear: both;"></div>
	<div class="box box3">
		<div class="top-box"><i class="icon-trophy"></i>航空公司售票详情</div>
		<div class="main-box">
		<table style="width: 100%;position: relative;top: 0px;">
			<thead>
		        <tr style="background-color:white; color: black;height: 30px;">
		                            <td>序号</td>
		                            <td id="month1">名称</td>
		                            <td id="month2">售票数量(单位:张)</td>
		                            <td id="month3">售票金额(单位:万元)</td>
		                            </tr>
		    </thead>
		    <tbody id="datalist">
		    </tbody>
		</table>
		</div>
		<div class="pageBox">
		    <div class="page">
			      <ul class="pageMenu clearfix" style="width:545px;">
			        <li class="firstPage" id="firstPage" onclick="firstPage()">首页</li>
			        <li class="prevPage" id="prevPage" onclick="prevPage()"> < 上一页 </li>
			        <div class="pageObj">
			          
			        </div>
			        <li class="nextPage" id="nextPage" onclick="nextPage()"> 下一页 > </li>
			        <li class="lastPage" id="lastPage" onclick="lastPage()">尾页</li>
			        <li class="last" style="font-size: 14px;">
			          共<span id="currentPage"></span>/<span class="totalPage" id="totalPage"></span>页，跳转至 <input type="number" class="keuInput"  id="selectPage" value="1" style="width:45px">
			          <button type="button" class="btnSure"  onclick="selectPage()">确定</button>
			        </li>
			      </ul>
		    </div>
    	</div>
	</div>
	<div style="clear: both;"></div>
	<div class="box box4">
		<div class="top-box"><i class="icon-trophy"></i>航空公司售票详情</div>
		<div class="main-box" style="background-color: white;">
			<div id="main" style="width: 100%;height: 480px;"></div>
		</div>
	</div>
	<div style="clear: both;"></div>
	<div class="box box4">
	</div>
	</section>
</div>
</main>
<footer class="btm-ft">
	<p class="clear">
		<span class="fl">©Copyright 2017 <a href="#"  target="_blank">北京工业大学信息学部（原软件学院）</a></span>
	</p>
</footer>
</div>
</div>
</body>
</html>
